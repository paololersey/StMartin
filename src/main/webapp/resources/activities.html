<!doctype html>
<html lang="en" data-ng-app="activitiesApp">
<head>


<meta charset="utf-8">
<title>St. Martin Programs</title>

<!-- CSS -->

<link rel="stylesheet" type="text/css" href="css/ng-grid.css" />
<link rel="stylesheet" type="text/css"
	href="bootstrap/css/bootstrap.css" />
<link rel="stylesheet" href="css/app.css">
<link rel="stylesheet" href="css/activities.css">

<link rel="stylesheet" type="text/css"
	href="jqueryui/1.10/theme/smoothness/jquery-ui.css" />

<script type="text/javascript" src="lib/angular/1.2.16/angular.min.js"></script>
<script type="text/javascript" src="ang-ui-bootstrap/ui-bootstrap-tpls-0.11.0.min.js"></script>
<script type="text/javascript" src="jquery/1.8/jquery.min.js"></script>
<script type="text/javascript" src="lib/angular/ng-grid-2.0.11.debug.js"></script>


<script src="js/activities.js"></script>
<script src="js/datePicker.js"></script>

</head>
<body data-ng-controller="activitiesStMartin">

<div align="center">
    <span style="display: inline-block; width: 15%"></span> 
    <span style="display: inline-block; width: 80%">
  	<tabset>
 	 <tab heading="Person in charge: Volunteer" select="volunteerSelected()" class="redColor"></tab>
 	 <tab heading="Person in charge: Staff Worker" select="socialWorkerSelected()"></tab>
 	 <tab data-ng-show="isCPCN" heading="Person in charge: Center Manager"  select="centeManagerSelected()"></tab>
 	 <tab data-ng-show="isCPPD" heading="Person in charge: Therapyst"  select="physioterapistSelected()"></tab>
    </tabset>
    </span> 
    
</div>
    
    <div style="width: 99%; height: 30px"></div>
	
	<div style="width: 99%;">
	  
		<span class="panel panel-primary box-shadow"
			style="display: inline-block; width: 60%;height:230px;" >
			<div class="panel-heading"  style="height:35px;">
				<a class="panel-title">Filter by:</a>			  
			</div>
			 
			<div class="panel-body"  >
			     <div>
			     <span class="formMainSpan" data-ng-controller="DatepickerDemoCtrl">
			             <span class="subFilterSpanLeft">Start</span>
                         <span class="subFilterSpanRight">
			   			 	 <span>
                		 	  <input style="width:45%;" type="text" data-ng-change="selectActivityfiltered('','',dateStart,'','')" datepicker-popup="{{format}}" ng-model="dateStart" is-open="opened" min-date="minDate" max-date="'2015-06-22'" datepicker-options="dateOptions" date-disabled="disabled(date, mode)" close-text="Close" />
             		    	 </span>
             				 <button  vtype="button" data-ng-click="open($event)" class="btn btn-default" ><i class="glyphicon glyphicon-calendar"></i></button>
             	         </span>
             	 </span> 	
             	 <span class="formMainSpan" ng-controller="DatepickerDemoCtrl">
                        <span class="subFilterSpanLeft">End</span>
			  		    <span class="subFilterSpanRight">
			  		  	  <span>
                      	     <input style="width:45%;" type="text" data-ng-change="selectActivityfiltered('','','',dateEnd,'')" datepicker-popup="{{format}}" ng-model="dateEnd" is-open="opened" min-date="minDate" max-date="'2015-06-22'" datepicker-options="dateOptions" date-disabled="disabled(date, mode)"  close-text="Close" />
                      	  </span>
                      	  <button  vtype="button" data-ng-click="open($event)" class="btn btn-default"><i class="glyphicon glyphicon-calendar"></i></button>
                        </span>                
                 </span>
		
			   </div>
			   
			   <div>
			   <span class="formMainSpan" >
                        <span class="subFilterSpanLeft">PersonInCharge</span>
			  		    <span class="subFilterSpanRight">			  		  	  
                      	    <select data-ng-change="selectActivityfiltered('',objectPCH,'','','','','')" data-ng-model="objectPCH" data-ng-options='objectPCH.firstName+" "+objectPCH.lastName for objectPCH in personInCharge'><option value=""></option></select>
                        </span> 
                </span>	        
                <span class="formMainSpan" >
                        <span class="subFilterSpanLeft">Beneficiary</span>
			  		    <span class="subFilterSpanRight">			  		  	  
                      	    <select data-ng-change="selectActivityfiltered(objectBEN,'','','','','','')" data-ng-model="objectBEN" data-ng-options='objectBEN.firstName+" "+objectBEN.lastName for objectBEN in beneficiaries'><option value=""></option></select>
			            </span>                
                </span>	   
			    </div>
			    
			    <div style="width: 99%; height: 10px"></div>
			    
			    <div>
			    <span class="formMainSpan" >
                        <span class="subFilterSpanLeft">Activity Type</span>
			  		    <span class="subFilterSpanRight">			  		  	  
                      	    <select style="width:90%;" data-ng-change="selectActivityfiltered('','','','',objectActType,'','')" data-ng-model="objectActType" data-ng-options='objectActType for objectActType in activityType'><option value=""></option></select>
                        </span> 
                </span>	        
                <span class="formMainSpan" >
                        <span class="subFilterSpanLeft" data-ng-hide="isCPPD">Intervention</span>
                        <span class="subFilterSpanLeft" data-ng-show="isCPPD">Appliance/kits</span>
			  		    <span class="subFilterSpanRight">			  		  	  
                      	    <select  style="width:90%;" data-ng-change="selectActivityfiltered('','','','','','',objectIntervention)" data-ng-model="objectIntervention" data-ng-options='obj for obj in interventionType'><option value=""></option></select>
			            </span>                
                </span>	   
			    </div>
			    
			    <div style="width: 99%; height: 10px"></div>
			    
			    <div>
			     <span class="formMainSpan" data-ng-hide="isCPCN">
                        <span class="subFilterSpanLeft" >Referral</span>
			  		    <span class="subFilterSpanRight">			  		  	  
                      	    <select data-ng-hide="items.isCPCN" data-ng-change="selectActivityfiltered('','','','','',objectReferral,'')" data-ng-model="objectReferral" data-ng-options='obj for obj in referralType'><option value=""></option></select>
                        </span> 
                </span>	    
			    <span class="formMainSpan" >
			      <span class="subFilterSpanLeft"><i>Quicksearch</i></span>
			      <span class="subFilterSpanRight">	
				 	 <span style="display: inline-block"><input type="text"
						ng-model="filterOptions.filterText" /></span>
				  </span>  
				</span>	
				</div>
				
				
			</div>		
				
		 </span>
		
	
	     <span class="panel panel-primary box-shadow"
			style="display: inline-block; width: 38%;height:230px; float:right; ">
			<div class="panel-heading" style="height:35px;">
				<a class="panel-title">Perform operations</a>
			</div>

			<div class="panel-body-crud" >
			            <div>
			            <span class="panelBodyCrudSpan">                 		  		  	  
                      	     <button data-ng-click="insertRowButton('')" class="btn btn-primary crudButtons">
									  <span class="glyphicon glyphicon-plus"></span></button>  
				     	</span> 
				        <span class="panelBodyCrudSpan" >                 		  		  	  
                      	      <button data-ng-click="deleteRowButton('')" class="btn btn-primary crudButtons">
						<span  class="glyphicon glyphicon-minus"></span></button>
				     	</span> 
				     	</div>
				     	
				     	<div style="width: 99%; height: 10px"></div>	
				     		     	
				     	 <div>
				     	 <span class="panelBodyCrudSpan" >                 		  		  	  
                      	     <button data-ng-click="selectRowButton('')" class="btn btn-primary crudButtons" >
					        	<span class="glyphicon glyphicon-pencil"></span></button>  
				     	</span> 
				     	 <span class="panelBodyCrudSpan" >                 		  		  	  
                      	     <button data-ng-click="report()" class="btn btn-primary crudButtons" >
						     <span class="glyphicon glyphicon-print"></span></button>
				     	</span> 
				     	</div>                    
					
			</div>	
	 </span>
	 </div>	
		 
    
   <!--  <div style="width: 99%;">
		<span class="panel panel-primary box-shadow"
			style="display: inline-block;width:100%;">
			<div class="panel-heading">
				<a class="panel-title">Filter by:</a>
			</div>
			
			<div class="panel-body">
			    <div>
			    Person in Charge:<select data-ng-change="selectActivityfiltered('',objectPCH,'','','','','')" data-ng-model="objectPCH" data-ng-options='objectPCH.firstName+" "+objectPCH.lastName for objectPCH in personInCharge'><option value=""></option></select>
			    Beneficiary <select data-ng-change="selectActivityfiltered(objectBEN,'','','','','','')" data-ng-model="objectBEN" data-ng-options='objectBEN.firstName+" "+objectBEN.lastName for objectBEN in beneficiaries'><option value=""></option></select>   
                 &nbsp activityType:<select  data-ng-change="selectActivityfiltered('','','','',objectActType,'','')" data-ng-model="objectActType" data-ng-options='objectActType for objectActType in activityType'><option value=""></option></select>
			     &nbsp referral:<select data-ng-hide="items.isCPCN" data-ng-change="selectActivityfiltered('','','','','',objectReferral,'')" data-ng-model="objectReferral" data-ng-options='obj for obj in referralType'><option value=""></option></select>
			    &nbsp intervention:<select  data-ng-change="selectActivityfiltered('','','','','','',objectIntervention)" data-ng-model="objectIntervention" data-ng-options='obj for obj in interventionType'><option value=""></option></select>
			    </div>
			    <div  style="height: 10px;"> <input type="text" hidden="true"/><br /></div>
			    <div>
			     Period - start date:
			    <span ng-controller="DatepickerDemoCtrl">
                    
			   			 <span>
                		   <input style="width:8%;" type="text" ng-change="selectActivityfiltered('','',dateStart,'','')" datepicker-popup="{{format}}" ng-model="dateStart" is-open="opened" min-date="minDate" max-date="'2015-06-22'" datepicker-options="dateOptions" date-disabled="disabled(date, mode)" close-text="Close" />
             		     </span>
             			 <button  vtype="button" ng-click="open($event)" class="btn btn-default" ><i class="glyphicon glyphicon-calendar"></i></button>
             		
             	 </span>
             	  &nbsp&nbsp end date:
             	 <span ng-controller="DatepickerDemoCtrl">                   
			  		    <span>
                          <input  style="width:8%;" type="text" ng-change="selectActivityfiltered('','','',dateEnd,'')" datepicker-popup="{{format}}" ng-model="dateEnd" is-open="opened" min-date="minDate" max-date="'2015-06-22'" datepicker-options="dateOptions" date-disabled="disabled(date, mode)"  close-text="Close" />
                        </span>
                        <button  vtype="button" ng-click="open($event)" class="btn btn-default" "><i class="glyphicon glyphicon-calendar"></i></button>                  
                 </span>
                 </div>
			</div>	
		</span> 
    </div>	 
	
	<div style="width: 99%;">
		<span class="panel panel-primary box-shadow"
			style="display: inline-block; width: 32%; margin-left:0.5%; ">
			<div class="panel-heading">
				<a class="panel-title">Look for activities</a>
			</div>

			<div class="panel-body">
				  <span style="display: inline-block"><input type="text"
					ng-model="filterOptions.filterText" /></span>
					
			</div>	
		</span> 
		<span  class="panel panel-primary box-shadow"
			style="display: inline-block; width: 32%; float:left; ">
		     <div class="panel-heading">
				<a class="panel-title">Print list</a>
			</div>
			<div class="panel-body-crud">
				 <button ng-click="report()" class="btn btn-primary " style="width:20%">
						<span class="glyphicon glyphicon-print"></span>
				 </button>	
			</div>	
		</span>
		<span class="panel panel-primary box-shadow"
			style="display: inline-block; width: 35%;float:right">
			<div class="panel-heading" >
				<a class="panel-title">Perform operations</a>
			</div>
			<div class="panel-body-crud">
				 <span style="display: inline-block">
				    
					<button ng-click="insertRowButton('')" class="btn btn-primary box-shadow">
						  <span 
							class="glyphicon glyphicon-plus"></span>
					</button>
					 <button ng-click="deleteRowButton('')" class="btn btn-primary box-shadow">
						<span 
							class="glyphicon glyphicon-minus"></span>
					</button>
					<button ng-click="selectRowButton('')" class="btn btn-primary box-shadow">
						<span 
							class="glyphicon glyphicon-pencil"></span>
					</button>
					
					</span> 
			</div>
		</span>
	</div> -->

<!-- secondGridStyle  ngTopprimaryPanel -->
	<div style="width: 99%" class="gridStyle  box-shadow-primary" data-ng-grid="gridOptions"></div>
	 <div style="width: 99%;height:10px;"></div>
	 <div >
     <span style="display: inline-block; width: 30% ;">
     	 <button data-ng-click="backButton('')" style="width:20%;float:left" class="btn btn-primary box-shadow">
			<span >Back</span>
		 </button>
      </span> 
    </div>
	
    <script type="text/ng-template" id="messageDialog.html">
      <div class="modal-header">
            <h3 class="modal-title">Message</h3>
      </div>
      <div class="modal-body"> 
      {{items.message}}     
      </div>
      <div class="modal-footer">	
            <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
        </div>
    </script>
    <script type="text/ng-template" id="myModalContentDelete.html">
      <div class="modal-header">
            <h3 class="modal-title">Delete activity</h3>
      </div>
      <div class="modal-body"> 
      Do you really want to delete this activity? 
      <input id="activityId" type="text" hidden="true"
				ng-model="items.activity.activityId" name="activityId"/>
      </div>
      <div class="modal-footer">	
            <button class="btn btn-primary" ng-click="ok()">OK</button>
            <button class="btn btn-primary" ng-click="cancel()">Cancel</button>
        </div>
    </script>
	<script type="text/ng-template" id="myModalContent.html">
      <div class="modal-header">
            <h3 class="modal-title">Insert/update activity</h3>
      </div>
      <div class="modal-body">
          
		<form name="form" id="insertActivityForm" 
			 novalidate>
            
       

         <div>  
             <span class="formMainSpan">
			    <div>
                <span class="subFormSpanLeft">Activity Type: </span>
                <span class="subFormSpanRight">
                    <select ng-model="items.activity.activityType"  ng-change="activityTypeChange()" ng-options='object for object in items.activityTypeList' name="activityType" required><option value=""></option></select>
			    
                </span>
                </div>
           </span>          
            <span class="formMainSpan" ng-hide="items.isCPCN">
                 <div>
                 <span class="subFormSpanLeft">Referral:  </span>		
                 <span class="subFormSpanRight">
                 	<select  ng-model="items.activity.referral" ng-options=" opt for opt in items.referralList"><option value=""></option></select>

                </span>
                </div>
             </span>
             <span class="formMainSpan" ng-show="items.isCPCN">
                 <div>
                 <span class="subFormSpanLeft">Level change:  </span>		
                 <span class="subFormSpanRight">
                 	<select ng-model="items.levelChange" ng-options=" opt for opt in items.personStateNames"><option value=""></option></select></select>

                </span>
                </div>
             </span>   
            
         </div>
         
         <div  style="height: 20%;">  <input id="activityId" type="text" hidden="true"
				ng-model="items.activity.activityId" name="activityId"/><br /></div>
         <div>          
            <span class="formMainSpan">
			    <div>
                <span class="subFormSpanLeft">Person in Charge: </span>
                <span class="subFormSpanRight">
                    <select ng-model="items.objectPCH" ng-options='objectPCH.firstName+" "+objectPCH.lastName for objectPCH in items.personInCharge' name="personInCharge" required><option value=""></option></select></select>
			    
                </span>
                </div>
           </span>
           <span class="formMainSpan" ng-show="items.beneficiaryToShow">
			    <div>
                <span class="subFormSpanLeft">Beneficiary: </span>
                <span class="subFormSpanRight">
                     <select 
                       ng-model="items.objectBEN" ng-options='objectBEN.firstName+" "+objectBEN.lastName for objectBEN in items.beneficiaries'  name="beneficiary" required><option value=""></option></select></select>
                </span>
                </div>
            </span>
            <span class="formMainSpan" ng-hide="items.beneficiaryToShow">
			    <div>
                <span class="subFormSpanLeft">Attending people: </span>
                <span class="subFormSpanRight">
                     <input type="number" ng-model="items.activity.attendingPeople" />                       
                </span>
                </div>
            </span>
         </div>  

        
         <div  style="height: 20%;"> <input type="text" hidden="true"
				 /><br /></div>
         
         <div>   			
              <span class="formMainSpan">
                 <div>
                 <span class="subFormSpanLeft">Date: </span>
                 <span class="subFormSpanRight" ng-controller="DatepickerDemoCtrl">
                    <div>
                       <span>
                         <input type="text"  datepicker-popup="{{format}}" ng-model="items.date" is-open="opened" min-date="minDate" max-date="'2015-06-22'" datepicker-options="dateOptions" date-disabled="disabled(date, mode)" ng-required="true" close-text="Close" name="activityDate" required>
                       </span>
                         <button  vtype="button" class="btn btn-default" ng-click="open($event)"><i class="glyphicon glyphicon-calendar"></i></button>
                    </div> 	      
                 </span>
                 </div>                 
             </span>         
			 <span class="formMainSpan" >
                 <div>
                 <span class="subFormSpanLeft" data-ng-hide="items.isCPPD">Intervention:  </span>
                 <span class="subFormSpanLeft" data-ng-show="items.applianceToShow">Appliance/kits:  </span>				
                 <span class="subFormSpanRight">
                 	<select data-ng-hide="items.isCPPD" ng-model="items.activity.intervention" ng-options=" opt for opt in items.interventionTypeList"><option value=""></option></select></select>
                    <select data-ng-show="items.applianceToShow" ng-model="items.activity.intervention" ng-options=" opt for opt in items.interventionTypeList"><option value=""></option></select></select>

                </span>
                </div>
             </span>            

         </div>

         <div  style="height: 20%;"> <input type="text" hidden="true"
				 /><br /></div>

         <div> 
          <span class="formMainSpan" ng-show="items.isCPPD">
                 <div>
                 <span class="subFormSpanLeft">Level change:  </span>		
                 <span class="subFormSpanRight">
                 	<select ng-model="items.levelChange" ng-options=" opt for opt in items.personStateNames"><option value=""></option></select></select>

                </span>
                </div>
             </span>   
         </div

         <div  style="height: 20%;"> <input type="text" hidden="true"
				 /><br /></div>
         
         
            
		</form>
	  
        </div>
        <div class="modal-footer">	
            <button class="btn btn-primary" ng-show="items.beneficiaryToShow"  ng-disabled="form.$pristine || (form.personInCharge.$error.required || form.beneficiary.$error.required ||
                                                                             form.activityType.$error.required || form.activityDate.$error.required)"
                                                                            ng-click="ok()">OK</button>
            <button class="btn btn-primary" ng-hide="items.beneficiaryToShow"  ng-disabled="form.$pristine || (form.personInCharge.$error.required  ||
                                                                             form.activityType.$error.required || form.activityDate.$error.required)"
                                                                            ng-click="ok()">OK</button>
            <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
        </div>
    </script>

   <script type="text/ng-template" id="modalNote.html">
      <div class="modal-header">
            <h3 class="modal-title">Note</h3>
      </div>
      <div class="modal-body"> 
      <div  style="height: 10%;">  <input id="activityId" type="text" hidden="true"  
				ng-model="notes.activityId" name="activityId"/><br /></div>
      <!--<div  class="gridNotesStyle box-shadow" data-ng-grid="gridNotesOptions"></div>-->
      <textarea rows="4" cols="50" name="noteDescription" ng-model="notes.noteDescription" disabled="true" ></textarea>		
      <div class="modal-footer">	
            <button class="btn btn-primary" ng-click="insertNote()" ng-hide="notes.isNoteAlreadyWritten" >Add note</button>
            <button class="btn btn-primary" ng-click="deleteNote()" ng-show="notes.isNoteAlreadyWritten" >Delete note</button>
            <button class="btn btn-primary" ng-click="cancel()">Cancel</button>
        </div>
    </script>
    
    <script type="text/ng-template" id="modalAddNote.html">
      <div class="modal-header">
            <h3 class="modal-title">New Note</h3>
      </div>
      <div class="modal-body" style="width:99%;height:200px;"> 
      <div  style="height: 1%;">  <input id="activityId" type="text" hidden="true"
				ng-model="addNotes.activityId" name="activityId"/><br /></div>
      <textarea rows="4" cols="50" name="noteDescription" ng-model="addNotes.noteDescription"></textarea>
     						
      </div>
      <div class="modal-footer">	
            <button class="btn btn-primary" ng-click="ok()">OK</button>
            <button class="btn btn-primary" ng-click="cancel()">Cancel</button>
        </div>
    </script>
 


</body>
</html>
